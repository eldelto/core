{{define "content"}}

<div class="ToDoList">
  <form method="POST" action="/lists/{{.Identifier}}/quick-edit"
		id="ToDoItemForm"
		hx-post="/lists/{{.Identifier}}/quick-edit"
		hx-trigger="end, change target:.ToDoItem>input">

	{{block "toDoListOnly" .}}
	<a id="edit-link" href="/lists/{{.Identifier}}/edit">Edit</a>
	<h1 class="ToDoListTitle {{if .IsCompleted}}checked{{end}}">
	  {{.Title.Value}}
	</h1>

	<div class="ToDoItems sortable">
	  {{range .GetItems}}
	  <div class="ToDoItem">
		<input type="hidden" name="{{.Identifier}}" value="" />
		<input type="checkbox" name="{{.Identifier}}" id="{{.Identifier}}"
			   {{if .Checked}}checked{{end}} />
		<label for="{{.Identifier}}" class="ToDoItemCheckbox"></label>
		<span class="ToDoItemTitle">{{.Title}}</span>
		<span class="ToDoItemDragHandle sort-handle" tabindex="0" role="button">
		  <svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"></path>
		  </svg>
		</span>
		<button class="ToDoItemDeleteButton" hidden
				hx-delete="/lists/{{$.Identifier}}/items/{{.Identifier}}"
				hx-trigger="delete-item from:closest .ToDoItem"
				hx-confirm="Delete the selected to-do item?"
				hx-target="#ToDoItemForm"></button>
	  </div>
	  {{end}}
	</div>
	{{end}}
  </form>

  <form method="POST" action="/lists/{{$.Identifier}}/items"
		class="AddItemBar"
		hx-post="/lists/{{$.Identifier}}/items"
		hx-target="#ToDoItemForm">
	<button id="AddItemBarButton" type="submit" value="" disabled>
	  <svg id="AddItemButtonDisabled" width="24" height="24" viewBox="0 0 24 24">
		<path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"></path>
	  </svg>
	  <svg id="AddItemButtonEnabled" width="24" height="24" viewBox="0 0 24 24">
		<path d="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
	  </svg>
	</button>
	<input type="text" name="title" id="AddItemBarTitle"
		   placeholder="New item" />
  </form>
</div>

{{end}}
